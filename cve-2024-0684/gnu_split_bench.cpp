#include <benchmark/benchmark.h>
#include <cstdlib>
#include <string>

static void BM_GNU_Split(benchmark::State& state) {
    std::string input = "/tmp/input_gnu.txt";
    std::string cmd = "head -c " + std::to_string(state.range(0)) + "M </dev/zero >" + input;
    std::system(cmd.c_str());
    for (auto _ : state) {
        std::system(("split -b 10M " + input + " /tmp/x_").c_str());
    }
}

BENCHMARK(BM_GNU_Split)->Arg(100); // 100 MB input

BENCHMARK_MAIN();
